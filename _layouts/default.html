<!DOCTYPE html>
<html lang="en">

{% include head.html %}

<!-- hack iOS CSS :active style -->
<body ontouchstart="">

    {% include nav.html %}

    {{ content }}

    {% include footer.html %}

    <button id="back-to-top" class="back-to-top">TOP</button>

<!-- Image to hack wechat -->
<img src="/img/wechat.png" width="0" height="0" />
<!-- Migrate from head to bottom, no longer block render and still work -->

<script>
    // Smart Header
    var lastScrollTop = 0;
    var navbar = document.querySelector('.navbar-custom');
    var header = document.querySelector('header.intro-header');
    var headerHeight = header ? header.offsetHeight : 0;

    // Remove back-to-top button on portrait orientation
    if (window.innerHeight > window.innerWidth) {
        var backToTopBtn = document.getElementById('back-to-top');
        if (backToTopBtn) {
            backToTopBtn.remove();
        }
    }

    window.addEventListener('scroll', function() {
        var scrollTop = window.pageYOffset || document.documentElement.scrollTop;

        if (scrollTop > lastScrollTop && scrollTop > headerHeight) {
            // Scroll Down
            navbar.classList.remove('is-visible');
            navbar.classList.add('is-fixed');
        } else {
            // Scroll Up
            if (scrollTop + window.innerHeight < document.body.scrollHeight) {
                navbar.classList.add('is-visible');
            }
        }
        lastScrollTop = scrollTop;
    });

    // Back to top button
    var backToTopBtn = document.getElementById('back-to-top');
    if (backToTopBtn) {
        window.addEventListener('scroll', function() {
            if (window.pageYOffset > 200) {
                backToTopBtn.style.display = 'block';
            } else {
                backToTopBtn.style.display = 'none';
            }
        });
        backToTopBtn.addEventListener('click', function() {
            window.scrollTo({top: 0, behavior: 'smooth'});
        });
    }

</script>

</body>

</html>
